<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>R-Wheel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
    body {
        font-family: "Courier New", monospace;
        background: #000;
        color: #0aff0a;
        text-align: center;
        padding: 20px;
        margin: 0;
    }

    h2 {
        font-size: 28px;
        margin-bottom: 15px;
        text-shadow: 0 0 8px #0aff0a;
    }

    #wheelContainer {
        position: relative;
        width: 90vw;
        max-width: 400px;
        height: 90vw;
        max-height: 400px;
        margin: auto;
    }

    #wheel {
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 4px solid #0aff0a;
        transition: transform 4s cubic-bezier(0.25, 0.1, 0.1, 1);
    }

    /* Arrow */
    #arrow {
        position: absolute;
        bottom: -10px;
        left: 50%;
        transform: translateX(-50%);
        width: 0;
        height: 0;
        border-left: 18px solid transparent;
        border-right: 18px solid transparent;
        border-top: 26px solid #0aff0a;
        z-index: 10;
    }

    #spinBtn {
        margin-top: 15px;
        padding: 12px 30px;
        background: transparent;
        border: 2px solid #0aff0a;
        color: #0aff0a;
        font-size: 18px;
        cursor: pointer;
        border-radius: 8px;
        text-shadow: 0 0 5px #0aff0a;
    }
    #spinBtn:hover {
        background: #0aff0a;
        color: #000;
    }

    #inputs {
        margin-top: 25px;
    }

    textarea {
        width: 80%;
        max-width: 300px;
        padding: 6px;
        background: #111;
        color: #0aff0a;
        border: 1px solid #0aff0a;
        border-radius: 6px;
        font-family: "Courier New";
    }

    button {
        background: transparent;
        border: 2px solid #0aff0a;
        color: #0aff0a;
        padding: 8px 20px;
        cursor: pointer;
        margin-top: 10px;
        border-radius: 6px;
        text-shadow: 0 0 5px #0aff0a;
    }
    button:hover {
        background: #0aff0a;
        color: #000;
    }

    /* Result Popup */
    #resultBox {
        display: none;
        position: fixed;
        top: 50%; 
        left: 50%;
        transform: translate(-50%, -50%);
        background: #000;
        padding: 25px 50px;
        border-radius: 10px;
        font-size: 28px;
        font-weight: bold;
        color: #0aff0a;
        box-shadow: 0 0 20px #0aff0a;
        border: 2px solid #0aff0a;
        z-index: 9999;
    }

    #confetti {
        position: fixed;
        top: 0; left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 150;
    }

    footer {
        margin-top: 40px;
        color: #0aff0a;
        font-size: 14px;
        opacity: 0.8;
    }
    footer a {
        color: #0aff0a;
        text-decoration: underline;
    }
</style>
</head>
<body>

<h2>R-Wheel â€” A Random Wheel.</h2>
Created by <strong>Rivek Raj Tamang (RivuDon)</strong> <br></br>

<div id="wheelContainer">
    <div id="arrow"></div>
    <canvas id="wheel"></canvas>
</div>

<button id="spinBtn">SPIN</button>

<div id="inputs">
    <h3>Customize Wheel (comma separated)</h3>
    <textarea id="customText" rows="3" placeholder="YES,NO,MAYBE"></textarea>
    <br>
    <button onclick="updateWheel()">UPDATE</button>
</div>

<div id="resultBox"></div>
<canvas id="confetti"></canvas>

<footer>
    Created by <strong>Rivek Raj Tamang (RivuDon)</strong>  
    <br><a href="https://www.linkedin.com/in/rivektamang/" target="_blank">LinkedIn Profile</a>
</footer>

<script>
    // ---------------------------
    // WHEEL CANVAS
    // ---------------------------
    let canvas = document.getElementById("wheel");
    let ctx = canvas.getContext("2d");
    canvas.width = 400;
    canvas.height = 400;

    let options = ["YES","NO","YES","NO","YES","NO","YES","NO"];
    let angle = 0;
    let spinning = false;

    function drawWheel() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        let arc = (2 * Math.PI) / options.length;

        for (let i = 0; i < options.length; i++) {
            ctx.beginPath();
            ctx.fillStyle = i % 2 === 0 ? "#003300" : "#004d00";
            ctx.moveTo(200, 200);
            ctx.arc(200, 200, 190, arc * i, arc * (i + 1));
            ctx.fill();
            ctx.save();

            ctx.translate(200, 200);
            ctx.rotate(arc * i + arc / 2);
            ctx.textAlign = "right";
            ctx.fillStyle = "#0aff0a";
            ctx.font = "18px Courier New";
            ctx.fillText(options[i], 160, 10);
            ctx.restore();
        }
    }
    drawWheel();

    // ---------------------------
    // SPIN LOGIC
    // ---------------------------
    document.getElementById("spinBtn").onclick = function () {
        if (spinning) return;
        spinning = true;

        let randomRotation = Math.random() * 2000 + 2000;
        angle += randomRotation;
        canvas.style.transform = `rotate(${angle}deg)`;

        setTimeout(() => {
            spinning = false;
            showResult();
        }, 4000);
    };

    function getResult() {
        let sliceAngle = 360 / options.length;
        let adjustedAngle = (angle % 360 + 360) % 360;
        let pointerAngle = (270 - adjustedAngle + 360) % 360;
        let index = Math.floor(pointerAngle / sliceAngle);
        return options[index];
    }

    function showResult() {
        let result = getResult();
        let box = document.getElementById("resultBox");
        box.innerHTML = result;
        box.style.display = "block";

        launchConfetti();

        setTimeout(() => {
            box.style.display = "none";
        }, 2500);
    }

    function updateWheel() {
        let input = document.getElementById("customText").value.trim();
        if (input.length > 0) {
            options = input.split(",").map(x => x.trim());
        }
        drawWheel();
    }

    // ---------------------------
    // CONFETTI
    // ---------------------------
    const confettiCanvas = document.getElementById("confetti");
    const confettiCtx = confettiCanvas.getContext("2d");
    confettiCanvas.width = window.innerWidth;
    confettiCanvas.height = window.innerHeight;

    let confettiPieces = [];

    function launchConfetti() {
        confettiPieces = [];
        for (let i = 0; i < 150; i++) {
            confettiPieces.push({
                x: Math.random() * confettiCanvas.width,
                y: -Math.random() * 400,
                size: Math.random() * 6 + 3,
                color: `hsl(${Math.random() * 100 + 120}, 70%, 50%)`,
                speed: Math.random() * 3 + 2
            });
        }
        animateConfetti();
    }

    function animateConfetti() {
        confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);

        confettiPieces.forEach(p => {
            p.y += p.speed;
            confettiCtx.fillStyle = p.color;
            confettiCtx.fillRect(p.x, p.y, p.size, p.size);
        });

        requestAnimationFrame(animateConfetti);
    }
</script>

</body>
</html>
